![](https://i.imgur.com/cke0jAl.jpg)

모스 부호, 낚싯줄, 서보 및 센서를 사용하여 두 개의 마이크로 비트를 통신하십시오! 마이크로가 조금 더 차가울 때 라디오를 사용하는 이유는 무엇입니까?


## 목표  
---

- Python을 사용하여 마이크로 비트 프로그래밍
- 사전을 사용하여 모스 코드를 인코딩 및 해독합니다.
- 서보를 움직이고 충돌 센서를 사용하여 감지합니다.

![](https://i.imgur.com/cKy5xLl.gif)  


## 준비물
---

- 2 x [마이크로비트](http://www.icbanq.com/shop/templete_list.asp?t_idx=163)  
- 2 x [브레이크아웃 보드](http://www.icbanq.com/shop/templete_list.asp?t_idx=163)  
- 2 x Micro-USB 케이블
- 1 x 서보모터
- 1 x [충돌 센서](http://www.icbanq.com/shop/templete_list.asp?t_idx=163)  
-가는 줄 (예 : 낚시 줄)
- 옵션 : 골판지 시트

이 gif에서 문자열을 볼 수는 없지만 서보와 충돌 센서 사이에 문자열이 있습니다!


## 왜 파이선인가? 
---
- 영어 처럼 읽기 - 파이썬은 읽기 쉬운 언어 중 하나입니다. 환상적인 초보자 용 언어입니다.
- 다용도 - Python은 정당한 이유로 업계 표준입니다. 많은 것을 할 수 있습니다. 이것이 Google과 YouTube가 백엔드 소프트웨어의 일부로이 언어를 사용하는 이유입니다.
- 활동적인 커뮤니티 - 파이썬은 초보자에게 가장 인기있는 언어 중 하나입니다. 수많은 리소스가 있으며 코드를 살펴 보는 데 도움이되는 정보가 많습니다. 코드 작성 과정에서 걸림돌이되는 것을 극복하는 데 도움이된다는 것을 알 수 있습니다.

## 파이썬에서 코딩을 시작하려면 어떻게해야합니까?
---

파이썬에서 코드를 작성하려면 공식 마이크로 : 비트 파이썬 편집기를 사용하십시오. 프로그램을 실행하려면 다운로드 버튼을 클릭하고 .hex 파일을 컴퓨터에 연결된 MICROBIT 드라이브로 끌어다 놓으십시오.

## 개요
---

우리는 2 개의 마이크로 비트를 사용할 것입니다. 하나는 모스 부호를 전송하고 하나는 모스 부호를 수신합니다. 데이터의 전송은 문자열의 길이에 걸쳐 수행됩니다. 서보가 문자열 (인코딩 된 입력을 기반으로 함)을 잡아 당길 때 크래시 센서는 당김을 감지하고이를 모스 부호에서 문자로 디코딩합니다. 물론 마이크로의 무선 구성 요소를 통해 데이터를 전송할 수 있습니다

## 조립법
![](https://i.imgur.com/Jraq386.jpg)  

서보를 골판지 시트에 부착하고 서보에 부착 된 회 전자 끝 부분에 줄을 매십시오. 끈의 다른 쪽 끝을 충돌 센서의 금속 플랩 주변에 묶습니다. 서보가 회전하면 스트링이 당겨지고 센서가 활성화되도록 거리에 충돌 센서를 부착하십시오. 골판지 시트가 없다면 테이블에 모든 것을 붙일 수 있습니다. 전송 마이크로 : 비트의 경우 브레이크 아웃 보드의 핀 0에 서보를 연결하십시오. 수신 마이크로 비트의 경우 브레이크 아웃 보드의 핀 0에 크래시 센서를 연결합니다.

## 모스 부호 란 무엇입니까?

모스 코드는 짧은 ( "."또는 "dit") 및 긴 ( "-"또는 "dah") 신호의 조합으로 텍스트를 전송하는 데 사용되는 코드 유형입니다. 0에서 9까지의 알파벳과 숫자의 모든 문자는 자체 모스 부호 표현을 가지고 있습니다. 문자는 일시 중지로 구분됩니다.
## 송신기
---

### 1 단계 : 모스 코드에 텍스트 인코딩

텍스트 "HELLO WORLD"가 주어 졌다고 가정하고이를 모스 부호로 변환하려고합니다. 첫째, 우리는 "E"가 "."이고 "W"가 ".-"임을 알 수 있도록 각 편지의 모스 부호가 무엇인지에 대한 '테이블'을 가져야합니다.
 
파이썬의 데이터 구조 중 하나 인 사전을 사용하여 키를 값에 연결할 수 있습니다. 이 경우, 키는 알파벳의 문자이어야하며 값은 해당 문자의 모스 코드 표현이어야합니다.

(https://i.imgur.com/rRzdgEv.png)

트릭을 수행해야하는 사전은 다음과 같습니다.


MORSE_CODE = {'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..', '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.' }  

이제 각 편지를 모스 코드로 번역 할 수 있으므로 전체 메시지를 모아서 각 문자 끝에 공백을 추가하여 수신자에게 문자가 전송되었음을 알려야합니다.

### 2 단계 : 모스 부호 기반 서보 이동

메시지를 모스 코드 형식으로 변환 한 후 다음 단계는 인코딩 된 메시지를 기반으로 서보를 이동하는 것입니다. 이 경우 dit는 0.6 초 텀, dah는 1.2 초 텀, space 는 1.6 초 텀을 나타냅니다.

먼저, 센서를 잡아 당겨 센서를 작동 시키거나 센서를 작동시키지 못하게하는 서보의 정확한 각도를 찾아야합니다. 우리는이 값을 press_angle와 release_angle이라고 부를 것입니다. 이 설정의 경우 해당 값은 150과 60이지만 센서와 서보를 배치 한 방법에 따라 다릅니다.

서보를 이동하려면 여기에서 얻을 수있는 클래스를 사용해야합니다. 이 클래스를 온라인 편집기에서 사용하려면이 코드를 복사하여 프로그램 시작 부분에 붙여 넣으십시오.

각 문자 (dit, dah 또는 space)에 대해 적절한 길이의 문자열을 잡아 당긴 다음 짧은 시간 동안 문자열을 해제해야합니다.
![](https://i.imgur.com/N863fTN.png)  
![](https://i.imgur.com/yAghLJX.jpg)  
## 수신기
---

### 1 단계 : 센서 데이터를 모스 코드로 변환

끈이 센서에서 잡아 당기면 플랩을 아래로 내리고 아날로그 입력을 사용하여이를 감지 할 수 있습니다. 플랩이 내려갈 때마다 핀의 아날로그 판독 값이 임계 값 이하로 떨어집니다. 이 경우 임계 값 100을 사용합니다.

플랩을 누르면 이벤트를 트리거하는 이벤트 리스너를 사용할 수는 있지만 폴링을 수행하는 것이 더 쉬울 것입니다. 폴링은 특정 간격 (이 경우 0.1 초)에서 아날로그 판독 값을 확인하는 것을 의미합니다.

한 싸이클에서 플랩이 눌려 있다면, 우리는 press_length를 100만큼 증가 시켜서 플랩이 얼마나 오래 눌러 졌는지 추적합니다. 플랩이 해제 된 것으로 판명되면 press_length를 사용하여 버튼이 눌린 시간을 파악하고 어떤 문자 (dit, dah 또는 space)를 전송했는지 확인할 수 있습니다. cur_letter 변수에이 값을 추가합니다. cur_letter는 지금까지 전송 된 dits와 dah를 추적합니다.

! [] (https://i.imgur.com/uCvCiRx.jpg)
! [] (https://i.imgur.com/nXcUFnn.png)


### 2 단계 : 모스 부호를 문자로 번역하기

공백이 감지 될 때마다 지금까지 감지 된 문자 (dits 또는 dah)를 문자로 변환해야합니다. 사전을 다시 사용해야합니다. 이번에는 키가 모스 부호로 표현되어야하며 값은 알파벳의 문자 여야합니다.

다음은 해독 사전에 대한 코드입니다.

MORSE_DECODE = {'.-': 'A', '-...': 'B', '-.-.': 'C', '-..': 'D', '.': 'E', '..-.': 'F', '--.': 'G', '....': 'H', '..': 'I', '.---': 'J', '-.-': 'K', '.-..': 'L', '--': 'M', '-.': 'N', '---': 'O', '.--.': 'P', '--.-': 'Q', '.-.': 'R', '...': 'S', '-': 'T', '..-': 'U', '...-': 'V', '.--': 'W', '-..-': 'X', '-.--': 'Y', '--..': 'Z', '-----': '0', '.----': '1', '..---': '2', '...--': '3', '....-': '4', '.....': '5', '-....': '6', '--...': '7', '---..': '8', '----.': '9'}

![](https://i.imgur.com/v3kUjVN.png)  
이제 문자가 감지 될 때마다 (스페이스 눌러 짐), 우리는 디코딩 사전에서 원본 문자를 얻을 수 있습니다. 그러나 때로는 수신자가 문자열 예인선 시퀀스를 올바르게 감지하지 못할 수 있으므로 시퀀스를 사전에서 찾을 수 없습니다. 사전에서 찾을 수없는 시퀀스를 찾으면 파이썬이 오류를 던지고 프로그램이 실행을 멈 춥니 다.

따라서 우리는 먼저 사전의 키에 시퀀스가 ​​있는지 확인해야하며, 그렇지 않으면 현재 문자를 "?"로 설정합니다. 현재 문자가 있으면 cur_char 변수를 설정하여 LED에 표시 할 수 있습니다. 각주기마다 감지 된 문자가 표시됩니다.


## 함께 모아서
---

처음에 설정이 완벽하게 작동하지 않는다면 괜찮습니다! 서보 또는 센서의 위치와 방향 및 서보의 누름 각도를 조정하십시오. 또한 텀의 지속 시간을 조정할 수도 있습니다.
[송신기] (https://pastebin.com/Qm7ZjxHJ)와 [수신자] (https://pastebin.com/JLEkPyYS)의 전체 코드는 다음과 같습니다.


## 확장
---

이 데이터 전송 방법이 명백한 이유로 사용되지는 않지만 데이터 전송의 많은 개념이 적합합니다. 문자열의 길이를 실험하여 길이가 얼마나 오랫동안 안정적으로 전송되는지 확인하고 "신호"가 너무 약해져서 감지 할 수없는 지점을 확인하십시오.

"신호"를 높이기 위해 수중 광섬유 케이블에서 20km마다 신호 증폭기가 설치되는 것과 유사하게 센서 신호를 새로운 잡아 당김으로 변환하는 증폭기로 세 번째 마이크로 비트를 사용할 수 있습니다.

모스 부호는 확실히 데이터를 전송하는 가장 효율적인 방법이 아니며 가장 신뢰할 수있는 방법이기도합니다. 다양한 유형의 인코딩 (바이너리 + ASCII, 해밍 코드 등)을 실험하고 전송시 손실 / 오류를 감지하고 수정하기위한 오류 수정 코드를 탐색하십시오.

![](https://i.imgur.com/m3fYEvK.png)  
